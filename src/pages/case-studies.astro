---
import Layout from "../layouts/Layout.astro";
import InnerHero from "../components/InnerHero.astro";
import Cta from "../components/Cta.astro";
import Blockquote from "../components/Blockquote.astro";
import CaseCard from "../components/CaseCard.astro";

// Placeholder images (swap when you have real ones)
import plumberImage from "../assets/images/all-in-one.jpg";
import hvacImage from "../assets/images/all-in-one.jpg";
import rooferImage from "../assets/images/all-in-one.jpg";

// Load page content from MD frontmatter
import { frontmatter } from "./content/case-studies.md";

const imageMap: Record<string, ImageMetadata> = {
  plumber: plumberImage,
  hvac: hvacImage,
  roofer: rooferImage,
};
---

<Layout title={frontmatter.title}>
  <InnerHero
    title={frontmatter.hero.title}
    description={frontmatter.hero.description}
    buttonText={frontmatter.hero.buttonText}
    buttonLink={frontmatter.hero.buttonLink}
  />

  <main class="services-page">
    <section class="py-16 xl:pt-28 xl:pb-0 px-6 xl:px-0 max-w-7xl mx-auto">
      <h2 class="text-3xl md:text-4xl font-bold mb-12 text-center" set:html={frontmatter.section.title}></h2>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 xl:gap-12">
        {
          frontmatter.caseCards.map((card) => (
            <CaseCard
              category={card.category}
              title={card.title}
              description={card.description}
              image={imageMap[card.key] ?? plumberImage}
              imageAlt={card.imageAlt}
              metrics={card.metrics}
              buttonText={card.buttonText}
              buttonLink={card.buttonLink}
            />
          ))
        }
      </div>
    </section>

    <Blockquote
      title={frontmatter.blockquote.title}
      titleHighlight={frontmatter.blockquote.titleHighlight}
      quote={frontmatter.blockquote.quote}
      author={frontmatter.blockquote.author}
      company={frontmatter.blockquote.company}
    />

    <Cta
      title={frontmatter.cta.title}
      highlightedText={frontmatter.cta.highlightedText}
      description={frontmatter.cta.description}
      buttonText={frontmatter.cta.buttonText}
      buttonLink={frontmatter.cta.buttonLink}
    />
  </main>
</Layout>

<style>
  .pillar-card { height: 100%; display: flex; flex-direction: column; }
  .pillar-card > div { height: 100%; display: flex; flex-direction: column; }
  .pillar-card a { margin-top: auto; }
</style>